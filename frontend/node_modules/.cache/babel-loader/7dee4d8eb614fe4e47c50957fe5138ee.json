{"ast":null,"code":"var _jsxFileName = \"/home/com117/Desktop/Ashwani/reactapp/newapp/frontend/src/components/UploadPost.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport queryString from 'query-string';\nexport default class UploadPost extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleInput = e => {\n      if (e.target.name == 'pic') {\n        console.log('file console in upload', e.target.files[0]);\n        this.setState({\n          'pic': e.target.files[0]\n        });\n      } else {\n        this.setState({\n          [e.target.name]: e.target.value\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const formData = new FormData();\n      formData.append('pic', this.state.pic);\n      formData.append('id', this.state.email);\n      formData.append('title', this.state.title);\n      formData.append('category', this.state.category);\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      console.log('data uploaded', formData);\n      axios.post('http://localhost:8086/addpost', formData, config).then(data => {\n        console.log('data returned after uploading', data);\n        document.getElementById('success').style.display = 'block';\n      });\n    };\n\n    this.state = {\n      email: this.props.match.params.username,\n      title: '',\n      category: 'Cats',\n      pic: null,\n      arrayOfCategory: []\n    };\n    console.log('upload', this.props.match.params);\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('authUser') === 'false') {\n      this.props.history.push('/login');\n    } else {\n      //getcategory\n      Axios.post('http://localhost:8086/getcategory').then(data => {\n        if (data.data.length !== 0) this.setState({\n          arrayOfCategory: data.data[0].categoriesArray\n        });\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"link\", {\n      href: \"/css/style2.css\",\n      rel: \"stylesheet\",\n      type: \"text/css\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(\"form\", {\n      id: \"form\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        fontSize: 30\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"UPLOAD WEB DATA \")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Title\")), React.createElement(\"input\", {\n      type: \"text\",\n      name: \"title\",\n      value: this.state.title,\n      onChange: this.handleInput,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Category\")), React.createElement(\"select\", {\n      name: \"category\",\n      value: this.state.value,\n      onChange: this.handleInput,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"Cats\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Cats\"), React.createElement(\"option\", {\n      value: \"Dogs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Dogs\"), React.createElement(\"option\", {\n      value: \"Birds\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Birds\"), React.createElement(\"option\", {\n      value: \"Rabbits\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Rabbits\"), React.createElement(\"option\", {\n      value: \"Others\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Others\"), this.state.arrayOfCategory.length > 0 ? this.state.arrayOfCategory.map((data, index) => {\n      return React.createElement(\"option\", {\n        value: data,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, data);\n    }) : null), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Choose image\")), React.createElement(\"input\", {\n      type: \"file\",\n      name: \"pic\",\n      onChange: this.handleInput,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Upload\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"success\",\n      style: {\n        color: 'green',\n        fontStyle: 'bold',\n        display: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Successfully sent\")));\n  }\n\n}","map":{"version":3,"sources":["/home/com117/Desktop/Ashwani/reactapp/newapp/frontend/src/components/UploadPost.js"],"names":["React","axios","queryString","UploadPost","Component","constructor","props","handleInput","e","target","name","console","log","files","setState","value","handleSubmit","preventDefault","formData","FormData","append","state","pic","email","title","category","config","headers","post","then","data","document","getElementById","style","display","match","params","username","arrayOfCategory","componentDidMount","localStorage","getItem","history","push","Axios","length","categoriesArray","render","fontSize","map","index","color","fontStyle"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from 'axios';\nimport queryString from 'query-string';\nexport  default class UploadPost extends React.Component{\n    constructor(props){\n        super(props)\n        this.state={\n            email: this.props.match.params.username,\n            title:'',\n            category:'Cats',\n            pic:null, \n            arrayOfCategory:[]\n        }\n\n     console.log(  'upload',  this.props.match.params)\n     \n    }\n\n\n\n    componentDidMount(){\n  \n        if(localStorage.getItem('authUser')==='false'){\n          \n            this.props.history.push('/login')\n        }\n\n        else{\n        \n        //getcategory\n        Axios.post('http://localhost:8086/getcategory').\n        then((data)=>{\n         if(data.data.length!==0)\n           this.setState({arrayOfCategory:data.data[0].categoriesArray})\n         \n        \n        })\n        \n        }\n\n      }\n\n    handleInput=(e)=>{\n        if(e.target.name=='pic'){\n            console.log('file console in upload',e.target.files[0])\n            this.setState({'pic':e.target.files[0]});           \n        }else{\n        this.setState({[e.target.name]:e.target.value});\n        }\n    }\n\n   \n\n    handleSubmit=(e)=>{\n        e.preventDefault();\n\n        const formData = new FormData();\n        formData.append('pic',this.state.pic);\n        formData.append('id',this.state.email);\n        formData.append('title',this.state.title);\n        formData.append('category',this.state.category);\n        \n\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        }\n\n        console.log('data uploaded',formData)\n        axios.post('http://localhost:8086/addpost',  formData,config )\n        .then((data) => { \n\n            console.log('data returned after uploading',data);\n            document.getElementById('success').style.display='block';\n          });\n\n      \n    }\n\n\n   \n\n    render(){\n        return(\n            <div >\n                <link href=\"/css/style2.css\" rel=\"stylesheet\" type=\"text/css\" />\n                 <form   id='form'  onSubmit={this.handleSubmit} >\n                 <div><span style={{fontSize:30}} >UPLOAD WEB DATA </span></div>\n                 <div><span>Title</span></div>\n                 <input type=\"text\" name='title'  value={this.state.title} onChange={this.handleInput}  required/>\n                 <div><span>Category</span></div>\n                 <select name=\"category\"  value={this.state.value}  onChange={this.handleInput} required>\n                     <option value=\"Cats\">Cats</option>\n                     <option value=\"Dogs\">Dogs</option>\n                     <option value=\"Birds\">Birds</option>\n                     <option value=\"Rabbits\">Rabbits</option>\n                     <option value=\"Others\">Others</option>\n                     {this.state.arrayOfCategory.length>0?\n                    this.state.arrayOfCategory.map((data,index)=>{\n                        return(\n                            <option value={data}>{data}</option>  \n                        )\n                    })\n                    \n                    :null}\n\n                 </select>\n                 <div><span>Choose image</span></div>\n                 <input type=\"file\" name='pic' onChange={this.handleInput} required />\n                  <input type='submit' value=\"Upload\"/>\n                    <div id='success' style={{color:'green',fontStyle:'bold',display:'none' }}>Successfully sent</div>\n                </form> \n                \n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}